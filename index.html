<!DOCTYPE html>
<html>
<head>
    <title>Private Inbox - Manage Messages</title>
    <style>
        body { font-family: sans-serif; padding: 20px; background: #eef; }
        .header { display: flex; justify-content: space-between; align-items: center; max-width: 600px; margin: 0 auto 20px auto; }
        .container { max-width: 600px; margin: 0 auto; }
        .card { 
            background: white; padding: 15px; margin-bottom: 15px; 
            border-radius: 10px; border-left: 5px solid #0064e0; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.1); position: relative;
        }
        .time { font-size: 11px; color: #888; margin-bottom: 8px; }
        p { margin: 5px 0; font-size: 15px; color: #333; }
        
        /* á€¡á€™á€¾á€­á€¯á€€á€ºá€•á€¯á€¶á€¸ á€á€œá€¯á€á€º */
        .delete-btn {
            position: absolute; right: 15px; top: 15px;
            background: #ff4d4d; color: white; border: none;
            padding: 5px 10px; border-radius: 5px; cursor: pointer;
            font-size: 12px;
        }
        .delete-btn:hover { background: #cc0000; }

        /* á€¡á€€á€¯á€”á€ºá€–á€»á€€á€ºá€á€²á€· á€á€œá€¯á€á€º */
        .clear-all {
            background: #4b4f56; color: white; border: none;
            padding: 8px 15px; border-radius: 5px; cursor: pointer;
        }
        .clear-all:hover { background: #1c1e21; }
    </style>
</head>
<body>

    <div class="header">
        <h3>ğŸ“© Inbox (Friend 1 á€‘á€¶á€™á€¾á€…á€¬á€™á€»á€¬á€¸)</h3>
        <button class="clear-all" onclick="deleteAll()">á€…á€¬á€¡á€¬á€¸á€œá€¯á€¶á€¸á€–á€»á€€á€ºá€›á€”á€º</button>
    </div>

    <div class="container" id="list">á€…á€¬á€¡á€á€…á€ºá€™á€»á€¬á€¸á€€á€­á€¯ á€…á€±á€¬á€„á€·á€ºá€”á€±á€•á€«á€á€Šá€º...</div>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDyOQCqc2moG-KECBJc75GcgY4TJk6yWm8",
            authDomain: "facebook-93395.firebaseapp.com",
            projectId: "facebook-93395",
            databaseURL: "https://facebook-93395-default-rtdb.asia-southeast1.firebasedatabase.app/",
            appId: "1:522909220682:web:3f080e0f14ce2016dd0bb3"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // á€…á€¬á€™á€»á€¬á€¸á€€á€­á€¯ á€•á€¼á€á€á€¼á€„á€ºá€¸
        const listDiv = document.getElementById('list');
        db.ref('messages/').on('value', (snap) => {
            listDiv.innerHTML = "";
            if(snap.exists()){
                snap.forEach((child) => {
                    const val = child.val();
                    const key = child.key; // Firebase á€›á€²á€· Unique ID
                    const html = `
                        <div class="card" id="msg-${key}">
                            <div class="time">${val.time}</div>
                            <button class="delete-btn" onclick="deleteMessage('${key}')">á€–á€»á€€á€ºá€™á€Šá€º</button>
                            <p><strong>á€…á€¬á€á€¬á€¸ á:</strong> ${val.part1}</p>
                            <p><strong>á€…á€¬á€á€¬á€¸ á‚:</strong> ${val.part2}</p>
                        </div>
                    `;
                    listDiv.insertAdjacentHTML('afterbegin', html);
                });
            } else {
                listDiv.innerHTML = "<center>á€…á€¬á€á€¬á€¸á€™á€›á€¾á€­á€á€±á€¸á€•á€«á‹</center>";
            }
        });

        // á€á€…á€ºá€á€¯á€á€»á€„á€ºá€¸á€…á€® á€–á€»á€€á€ºá€á€Šá€·á€º Function
        function deleteMessage(key) {
            if(confirm("á€’á€®á€…á€¬á€€á€­á€¯ á€–á€»á€€á€ºá€™á€¾á€¬ á€á€±á€á€»á€¬á€•á€«á€á€œá€¬á€¸?")) {
                db.ref('messages/' + key).remove();
            }
        }

        // á€¡á€¬á€¸á€œá€¯á€¶á€¸á€€á€­á€¯ á€á€…á€ºá€á€«á€á€Šá€ºá€¸ á€–á€»á€€á€ºá€á€Šá€·á€º Function
        function deleteAll() {
            if(confirm("á€…á€¬á€¡á€¬á€¸á€œá€¯á€¶á€¸á€€á€­á€¯ á€–á€»á€€á€ºá€•á€…á€ºá€™á€¾á€¬ á€á€±á€á€»á€¬á€•á€«á€á€œá€¬á€¸? á€•á€¼á€”á€ºá€šá€°á€œá€­á€¯á€· á€™á€›á€á€±á€¬á€·á€˜á€°á€¸á€”á€±á€¬á€ºá‹")) {
                db.ref('messages/').remove();
            }
        }
    </script>
</body>
</html>
